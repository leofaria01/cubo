<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Rodrigo Garcia Topan Moreira">
    <meta name="description" content="Páginal Inicial de Apresentação">
    <title>STAR INFO</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <!--Importando jquery-->
 	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
//A função ready no jquery serve para verificar se o carregamento da função foi bem sucedido 
$(document).ready(function(){
	//Função sendo executada ao botão ser clicado
    $("button").click(function(){
    	//Variavel que carrega o valor do campo de pesquisa
    	search = $('#nome').val();
    	//Variavel que carrega o valor do tipo de pesquisa selecionada
    	tipo = $('#tipo').val();
    	//Caso categoria selecionada ser pessoa
    	if(tipo=='people'){
		        $.ajax({url: "https://swapi.dev/api/people/?search="+search,//Concatenação da url da api com o valor da pesquisa
		         async: false,
		          success: function(result){
			          	$('#linha').each(function(i){//foreach que percorre todos as linhas retornadas pela api
			          		$('#name').html(result.results[i].name);//exibe o resultado da busca na tag que possuir o id="name"
			          		$("#height").html(result.results[i].height);
			          		$("#hair").html(result.results[i].hair_color);
			          		$("#eye").html(result.results[i].eye_color);
			          		$("#gender").html(result.results[i].gender);
			        	});
		       }}); 
		    }
    else if(tipo=='planets'){//pesquisa em caso de planetas
            $.ajax({url: "https://swapi.dev/api/planets/?search="+search,
	         async: false,
	          success: function(result){
		          	$('#linha2').each(function(i){
		          		$('#name2').html(result.results[i].name);
		          		$("#population").html(result.results[i].population);
		          		$("#orbital_period").html(result.results[i].orbital_period);
		          		$("#gravity").html(result.results[i].gravity);
		          		$("#terrain").html(result.results[i].terrain);
		        	});
	       }});	
	    }
    });
});
</script>
  </head>
  <body>
      <section id="section-1" style="width: 100%; height: 100%; min-height: 850px; background-image: url('img/sw.png'); background-repeat: no-repeat; background-attachment:static; background-size: cover;">
        <br><br>
        <div class="container-fluid">
          <div class="card" style="background-color: #222222; color: white;" align-in="center">
            <div class="card-body">
              <H2 class="display-4">STAR INFO</H2>
              <H3 class="lead"> SAIBA TUDO SOBRE O UNIVERSO STAR WARS</H3>
            </div>
          </div>
          <br> 
          <div class="card">
          <div class="card-header">
             <h2 class="card-title">PESQUISANDO O UNIVERSO</h2>
          </div>
          <div class="card-body">
            <div class="card-text" style="font-size: 120%;" align="justify">
              
                <div class="row">
                  <div class="col-md-4">
                    <input type="text" class="form-control" id="nome" placeholder="Nome do objeto">
                  </div>
                  <div class="col-md-3">
                    <select class="custom-select" id="tipo" name="tipo">
                    <option selected value="people">Pessoa</option>
                    <option value="planets">Planeta</option>
                  </select>
                  <button class="btn btn-dark btn-md">Pesquisar</button>
                  </div>
                </div>
            </div>
          </div>
        </div>   
        </div>
        <div class="container-fluid">
        <div class="jumbotron">
        <h4 style="background-color:white; height: 50px;">Busca por personagens</h4>
        <!--Tabela de exibição de valores-->
        <table class="table table-responsive" style="background-color: white;">
        <!--Cabeçalho da tabela de exibição de personagens-->
          <thead class="thead-dark" style="background-color: black; color: white;">
            <tr>
              <th scope="col">Nome</th>
              <th scope="col">Altura</th>
              <th scope="col">Cor Cabelo</th>
              <th scope="col">Cor Olhos</th>
              <th scope="col">Genero</th>
            </tr>
          </thead>
          <!--Aqui é exibido os valores que forem retornados pela api-->
          <tbody>
          <tr id="linha">
              <th scope="row" id="name"></th>
              <td id="height"></td>
              <td id="hair"></td>
              <td id="eye"></td>
              <td id="gender"></td>
            </tr>
          </tbody>
        </table>
        <h4 style="background-color:white; height: 50px;">Busca por planetas</h4>
        <table class="table table-responsive" style="background-color: white;">
          <thead class="thead-dark" style="background-color: black;color: white;">
            <tr>
              <th scope="col">Nome</th>
              <th scope="col">População</th>
              <th scope="col">Gravidade</th>
              <th scope="col">Periodo Orbital</th>
              <th scope="col">Terreno</th>
            </tr>
          </thead>
          <tbody>
          <tr id="linha2">
              <th scope="row" id="name2"></th>
              <td id="population"></td>
              <td id="gravity"></td>
              <td id="orbital_period"></td>
              <td id="terrain"></td>
            </tr>
          </tbody>
        </table>
        </div>
      </section>
  </body>
</html>